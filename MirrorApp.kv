#: import SwapTransition kivy.uix.screenmanager.SwapTransition
#: import SlideTransition kivy.uix.screenmanager.SlideTransition

###################### TRICKS AND TIPS ###########################

# To center a widget horizontally inside its parent
#    - pos: self.parent.width * .5 - self.width * .5, ........

# To highlight the size of a widget:
#    - canvas.after:
#				Color:
#				    rgba: 1,0,0,0.5
#				Rectangle:
#					size: self.size
#					pos: self.pos

###################################################################



<ScreenManagement>:
	transition: SwapTransition()
	MainScreen:
	NewsScreen:
	NewsSourceScreen:
	NewsArticleScreen:
	WeatherScreen:
	SettingScreen:

<TitleButton>:
    background_color: 0,0,0,1
    on_release:
        self.set_article()
        app.root.transition = SlideTransition()
		app.root.transition.direction = "left"
        app.root.current = "article"


<BackButton>:
    on_release:
        app.root.current = "main"
        app.root.transition.direction = "right"
        app.root.transition = SwapTransition()
    pos: 0,0
    text: "<"
    background_color: 0,0,0,1
    font_size:50

<MainScreen>:
	name: "main"
	GridLayout:
		spacing: 0,0
		rows:5
		pos: self.parent.pos
		size: self.parent.size
		ClockLabel:
			name: "clock"
			text: self.clock
			size_hint: 0.2,0.2
			font_size: 100	
		DateLabel:
			name: "date"
			text: self.date
			size_hint: 0.1, 0.1
			font_size: 25
		WeatherButton:
			on_release: 
				app.root.current = "weather"
				app.root.transition = SlideTransition()
			background_color: 0,0,0,1
			font_size: 50
			size_hint: 0.3,0.3
			Image:
				source: "sun.png"
				allow_stretch: True
				keep_ratio: False
				pos: self.parent.x + 20, self.parent.y + (self.parent.height / 5.5)
			WeatherLabel:
			    text: self.parent.temperature
			    background_color: 0,0,0,1
			    font_size: 50
			    pos: self.parent.x + 125, self.parent.y + 25

		NewsButton:
		    id: news_button
			on_release: 
				app.root.current = "news"
				app.root.transition = SlideTransition()
			background_color: 0,0,0,1
			size_hint: 0.3, 0.3
			font_size:50
			Image:
			    source: "news.png"
			    allow_stretch: True
				keep_ratio: False
				pos: self.parent.x + 20, self.parent.y + (self.parent.height / 5.5)
            IconContainer:
                id: icon_container
                cols:3
                pos:  self.parent.x + 130, self.parent.y + 45
                width: 300
                height: 75

                NewsIcon:
                    name: str(news_button.preferredNewsIDs[0])
                    id: news_button.preferredNewsIDs[0]
                    background_normal: str(news_button.preferredNewsIDs[0]) + ".png"
                    on_release:
                        self.set_titles()
                        app.root.transition = SlideTransition()
                        app.root.transition.direction = 'left'
                        app.root.current = "source"


                NewsIcon:
                    name: str(news_button.preferredNewsIDs[1])
                    id: news_button.preferredNewsIDs[1]
                    background_normal: str(news_button.preferredNewsIDs[1]) + ".png"
                    on_release:
                        self.set_titles()
                        app.root.transition = SlideTransition()
                        app.root.transition.direction = 'left'
                        app.root.current = "source"


                NewsIcon:
                    name: str(news_button.preferredNewsIDs[2])
                    id: news_button.preferredNewsIDs[2]
                    background_normal: str(news_button.preferredNewsIDs[2]) + ".png"
                    on_release:
                        self.set_titles()
                        app.root.transition = SlideTransition()
                        app.root.transition.direction = 'left'
                        app.root.current = "source"


		SettingButton:
			on_release: 
				app.root.current = "settings"
				app.root.transition = SlideTransition()
			background_color: 0,0,0,1
			size_hint: 0.3, 0.3
			font_size: 50
			Image:
			    source: "settings-wheel.png"
			    allow_stretch: True
				keep_ratio: False
				pos: self.parent.x + 20, self.parent.y + (self.parent.height / 5.5)


<WeatherScreen>:
	name: "weather"
	DrawInput
	Button:
		on_release: 
			app.root.current = "main"
			app.root.transition.direction = "right"
			app.root.transition = SwapTransition()
		pos: 0,1
		text: "<"
		background_color: 0,0,0,1
		size_hint: 0.08,0.05
		font_size:50

		
<NewsScreen>:
	name: "news"
	FloatLayout:
		Button:
			on_release: 
				app.root.current = "main"
				app.root.transition.direction = "right"
				app.root.transition = SwapTransition()
			pos: 0,1
			text: "<"
			background_color: 0,0,0,1
			size_hint: 0.08,0.05
			font_size:50


<NewsSourceScreen>:
    name: "source"
    id: source
    GridLayout:
        id: grid
        rows: len(source.titles) + 1 #The length of the titles from source plus one back button

<NewsArticleScreen>:
    name: "article"
    id: article
    GridLayout:
        rows: 3
        TitleLabel:
            font_size: 27
            id: title
            text_size: self.width, None
            halign: 'center'
            size_hint_y: 0.4

        PublishedLabel:
            id: published
            text: "Published at: "
            font_size: 20
            size_hint_y: 0.1

        DescriptionLabel:
            id: description
            text_size: self.width, None
            halign: 'center'
            valign: 'top'
            padding_y: 10
            font_size: 22

    FloatLayout:
		Button:
			on_release:
			    app.root.transition = SlideTransition()
			    app.root.transition.direction = "right"
				app.root.current = "source"

			pos: 0,1
			text: "<"
			background_color: 0,0,0,1
			size_hint: 0.08,0.05
			font_size:50



<SettingScreen>:
	name: "settings"
	DrawInput
	FloatLayout:
		Button:
			on_release:
				app.root.current = "main"
				app.root.transition.direction = "right"
				app.root.transition = SwapTransition()
			pos: 0,1
			text: "<"
			background_color: 0,0,0,1
			size_hint: 0.08,0.05
			font_size:50





	
	
